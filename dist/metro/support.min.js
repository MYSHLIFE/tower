((function(){var a,b,c,d,e,f=Object.prototype.hasOwnProperty,g=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(f.call(this,b)&&this[b]===a)return b;return-1},h=Array.prototype.slice,i=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};Metro.Support=new(a=function(){function a(){}return a}()),Metro.Support.Array={extractArgs:function(a){return Array.prototype.slice.call(a,0,a.length)},extractArgsAndOptions:function(a){return a=Array.prototype.slice.call(a,0,a.length),typeof a[a.length-1]!="object"&&a.push({}),a},args:function(a){var b;return a=Array.prototype.slice.call(a,0,a.length),typeof a[a.length-1]!="object"?b={}:b=a.pop(),{args:a,options:b}},argsOptionsAndCallback:function(){var a,b,c,d;return a=Array.prototype.slice.call(arguments),c=a.length-1,typeof a[c]=="function"?(b=a[c],a.length>=3?typeof a[c-1]=="object"?(d=a[c-1],a=a.slice(0,c-2+1||9e9)):(d={},a=a.slice(0,c-1+1||9e9)):d={}):a.length>=2&&typeof a[c]=="object"?(a=a.slice(0,c-1+1||9e9),d=a[c],b=null):(d={},b=null),[a,d,b]},sortBy:function(a){var b,c,d,e;return d=Array.prototype.slice.call(arguments,1,arguments.length),c=d[d.length-1]instanceof Array?{}:d.pop(),e=function(a,b){return a>b?1:a<b?-1:0},b=function(a,b){var f,g;return f=[],g=[],d.forEach(function(d){var h,i,j,k;return i=d[0],k=d[1],h=a[i],j=b[i],typeof c[i]!="undefined"&&(h=c[i](h),j=c[i](j)),f.push(k*e(h,j)),g.push(k*e(j,h))}),f<g?-1:1},d=d.map(function(a){return a instanceof Array||(a=[a,"asc"]),a[1]==="desc"?a[1]=-1:a[1]=1,a}),a.sort(function(a,c){return b(a,c)})}},c=["included","extended","prototype"],Metro.Support.Class=function(){function a(){}return a.alias=function(a,b){return this.prototype[a]=this.prototype[b]},a.alias_method=function(a,b){return this.prototype[a]=this.prototype[b]},a.accessor=function(a,b,c){return this._accessors||(this._accessors=[]),this._accessors.push(a),this.getter(a,b,c),this.setter(a,b),this},a.getter=function(a,b,c){return b||(b=this.prototype),b.hasOwnProperty("_getAttribute")||Object.defineProperty(b,"_getAttribute",{enumerable:!1,configurable:!0,value:function(a){return this["_"+a]}}),this._getters||(this._getters=[]),this._getters.push(a),Object.defineProperty(b,"_"+a,{enumerable:!1,configurable:!0}),Object.defineProperty(b,a,{enumerable:!0,configurable:!0},{get:function(){return this._getAttribute(a)||(c?this["_"+a]=c.apply(this):void 0)}}),this},a.setter=function(a,b){return b||(b=this.prototype),b.hasOwnProperty("_setAttribute")||Object.defineProperty(b,method,{enumerable:!1,configurable:!0,value:function(a,b){return this["_"+a]=b}}),this._setters||(this._setters=[]),this._setters.push(a),Object.defineProperty(b,"_"+a,{enumerable:!1,configurable:!0}),Object.defineProperty(b,a,{enumerable:!0,configurable:!0,set:function(b){return this._setAttribute(a,b)}}),this},a.classEval=function(a){return a.call(this)},a.delegate=function(a,b){var c;return b==null&&(b={}),c=b.to,typeof this.prototype[c]=="function"?this.prototype[a]=function(){var b;return(b=this[c]())[a].apply(b,arguments)}:Object.defineProperty(this.prototype,a,{enumerable:!0,configurable:!0,get:function(){return this[c]()[a]}})},a.delegates=function(){var a,b,c,d,e,f;a=Array.prototype.slice.call(arguments,0,arguments.length),c=a.pop(),f=[];for(d=0,e=a.length;d<e;d++)b=a[d],f.push(this.delegate(b,c));return f},a.include=function(a){var b,d,e,f,h,i,j,k,l,m,n;if(!a)throw new Error("include(obj) requires obj");this.extend(a),b=this,d=this,l=a,e=function(a){var b,c;b=function(){return a.apply(this,arguments)},b.prototype=a.prototype;for(c in a)a.hasOwnProperty(c)&&c!=="prototype"&&(b[c]=a[c]);return b},d.__super__&&(k=d.__super__),f=e(l),j=f.prototype,n=f.prototype;for(i in n)m=n[i],g.call(c,i)<0&&(this.prototype[i]=m);return k&&(f.prototype=k),d.__super__=j,h=a.included,h&&h.apply(a.prototype),this},a.extend=function(a){var b,d,e;if(!a)throw new Error("extend(obj) requires obj");for(d in a)e=a[d],g.call(c,d)<0&&(this[d]=e);return b=a.extended,b&&b.apply(a),this},a["new"]=function(){return function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return typeof e=="object"?e:d}(this,arguments,function(){})},a.instanceMethods=function(){var a,b;b=[];for(a in this.prototype)b.push(a);return b},a.classMethods=function(){var a,b;b=[];for(a in this)b.push(a);return b},a.prototype.instanceExec=function(){var a;return(a=arguments[0]).apply.apply(a,[this].concat(h.call(arguments.slice(1))))},a.prototype.instanceEval=function(a){return a.apply(this)},a.prototype.send=function(a){var b;if(this[a])return(b=this[a]).apply.apply(b,arguments);if(this.methodMissing)return this.methodMissing.apply(this,arguments)},a.prototype.methodMissing=function(a){},a}(),e=Metro.Support.Class;for(b in e)d=e[b],Function.prototype[b]=d;Metro.Support.Callbacks=function(){function a(){}return a}(),Metro.Support.Concern=function(){function a(){a.__super__.constructor.apply(this,arguments)}return a.included=function(){this._dependencies||(this._dependencies=[]),this.hasOwnProperty("ClassMethods")&&this.extend(this.ClassMethods);if(this.hasOwnProperty("InstanceMethods"))return this.include(this.InstanceMethods)},a._appendFeatures=function(){},a}(),Metro.Support.IE=function(){function a(){}return a}(),Metro.Support.I18n=function(){function a(){}return a.defaultLanguage="en",a.translate=function(a,b){b==null&&(b={}),b.hasOwnProperty("tense")&&(a+="."+b.tense);if(b.hasOwnProperty("count"))switch(b.count){case 0:a+=".none";break;case 1:a+=".one";break;default:a+=".other"}return this.interpolator().render(this.lookup(a,b.language),{locals:b})},a.t=a.translate,a.lookup=function(a,b){var c,d,e,f,g;b==null&&(b=this.defaultLanguage),d=a.split("."),e=this.store[b];try{for(f=0,g=d.length;f<g;f++)c=d[f],e=e[c]}catch(h){e=null}if(e==null)throw new Error("Translation doesn't exist for '"+a+"'");return e},a.store={},a.interpolator=function(){return this._interpolator||(this._interpolator=new(require("shift").Mustache))},a}(),Metro.Support.Number={isInt:function(a){return a===+a&&a===(a|0)},isFloat:function(a){return a===+a&&a!==(a|0)}},Metro.Support.Object={isA:function(a,b){},isHash:function(){var a;return a=arguments[0]||this,_.isObject(a)&&!_.isFunction(a)&&!_.isArray(a)},isPresent:function(a){var b,c;for(b in a)return c=a[b],!0;return!1},isBlank:function(a){var b,c;for(b in a)return c=a[b],!1;return!0}},Metro.Support.String={camelize:function(){return _.camelize("_"+(arguments[0]||this))},constantize:function(){return global[this.camelize.apply(this,arguments)]},underscore:function(){return _.underscored(arguments[0]||this)},titleize:function(){return _.titleize(arguments[0]||this)}},Metro.Support.RegExp={escape:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},escapeEach:function(){var a,b,c,d,e;d=[],a=arguments[0];for(b=0,e=a.length;b<e;b++)c=a[b],d[b]=this.escape(c);return d}},Metro.Support.Time=function(){function a(){this.moment=this.constructor._lib()()}return a._lib=function(){return require("moment")},a.zone=function(){return this},a.now=function(){return new this},a.prototype.toString=function(){return this._date.toString()},a.prototype.beginningOfWeek=function(){},a.prototype.week=function(){return parseInt(this.moment.format("w"))},a.prototype.dayOfWeek=function(){return this.moment.day()},a.prototype.dayOfMonth=function(){return parseInt(this.moment.format("D"))},a.prototype.dayOfYear=function(){return parseInt(this.moment.format("DDD"))},a.prototype.meridiem=function(){return this.moment.format("a")},a.prototype.zoneName=function(){return this.moment.format("z")},a.prototype.strftime=function(a){return this.moment.format(a)},a.prototype.beginningOfDay=function(){return this.moment.seconds(0),this},a.prototype.beginningOfWeek=function(){return this.moment.seconds(0),this.moment.subtract("days",6-this.dayOfWeek()),this},a.prototype.beginningOfMonth=function(){return this.moment.seconds(0),this.moment.subtract("days",6-this.dayOfMonth()),this},a.prototype.beginningOfYear=function(){return this.moment.seconds(0),this.moment.subtract("days",6-this.dayOfMonth())},a.prototype.toDate=function(){return this.moment._d},a}(),Metro.Support.Time.TimeWithZone=function(){function a(){a.__super__.constructor.apply(this,arguments)}return i(a,Metro.Support.Time),a}()})).call(this)