((function(){var a,b;Metro.View=function(){function a(a){this.controller=a||new Metro.Controller}return a}(),Metro.View.Helpers=function(){function a(){}return a.prototype.contentTypeTag=function(a){return a==null&&(a="UTF-8"),'\n    <meta charset="'+a+'" />'},a.prototype.t=function(a){var b;return(b=this._t)==null&&(this._t=require(""+Metro.root+"/config/locales/en")),this._t[a]},a.prototype.stylesheetTag=function(a){var b,c,d,e,f;c=this.assetPaths(a,{directory:Metro.Asset.config.stylesheetDirectory,extension:".css"}),d=[];for(e=0,f=c.length;e<f;e++)b=c[e],d.push('\n    <link href="'+b+'" media="screen" rel="stylesheet" type="text/css"/>');return d.join("")},a.prototype.javascriptTag=function(a){var b,c,d,e,f;c=this.assetPaths(a,{directory:Metro.Asset.config.javascriptDirectory,extension:".js"}),d=[];for(e=0,f=c.length;e<f;e++)b=c[e],d.push('\n    <script type="text/javascript" src="'+b+'" ></script>');return d.join("")},a.prototype.assetPaths=function(a,b){var c,d,e,f,g;return b==null&&(b={}),b.digest=!1,d=Metro.Asset,e=d.computePublicPath(a,b),Metro.env==="production"||Metro.Support.Path.isUrl(e)?[e]:(g=this,c=d.find(e),f=[],c.paths({paths:d.pathsFor(c.extension),require:Metro.env!=="production"},function(c){var e,g,h,i;i=[];for(e=0,h=c.length;e<h;e++)g=c[e],e===c.length-1&&(g=a),i.push(f.push(d.computePublicPath(g,b)));return i}),f)},a.prototype.titleTag=function(a){return"<title>"+a+"</title>"},a.prototype.metaTag=function(a,b){},a.prototype.tag=function(a,b){},a.prototype.linkTag=function(a,b,c){},a.prototype.imageTag=function(a,b){},a}(),Metro.View.Lookup=function(){function a(){}return a.initialize=function(){return this.resolveLoadPaths(),this.resolveTemplatePaths(),Metro.Support.Dependencies.load(""+Metro.root+"/app/helpers")},a.teardown=function(){},a.resolveLoadPaths=function(){var a;return a=Path,this.loadPaths=_.map(this.loadPaths,function(a){return Path.relativePath(a)})},a.lookup=function(a){var b,c,d,e,f,g,h,i,j,k;e=Metro.View.pathsByName,g=e[a];if(g)return g;i=Metro.View.paths,f=new RegExp(a+"$","i");for(j=0,k=i.length;j<k;j++){h=i[j],c=Path.dirname(h),b=Path.basename(h).split(".")[0],d=""+c+"/"+b;if(d.match(f))return e[a]=h,h}return null},a.resolveTemplatePaths=function(){var a,b,c,d,e,f;a=require("file"),c=this.paths,f=Metro.View.loadPaths;for(d=0,e=f.length;d<e;d++)b=f[d],a.walkSync(b,function(a,b,d){var e,f,g,h,i;i=[];for(g=0,h=d.length;g<h;g++)f=d[g],e=[a,f].join("/"),c.indexOf(e)===-1?i.push(c.push(e)):i.push(void 0);return i});return c},a.loadPaths=["./app/views"],a.paths=[],a.pathsByName={},a.engine="jade",a.prettyPrint=!1,a}(),b=require("shift"),a=require("pathfinder").File,Metro.View.Rendering=function(){function c(){}return c.prototype.render=function(){var a,c,d,e,f;a=Array.prototype.slice.call(arguments,0,arguments.length);if(a.length>=2&&typeof a[a.length-1]=="function")return c=a.pop(),a.length===1?typeof a[0]=="string"?d={template:a[0]}:d=a[0]:(f=a[0],d=a[1],d.template=f),d||(d={}),d.locals=this.context(d),d.type||(d.type=Metro.View.engine),d.engine=b.engine(d.type),d.hasOwnProperty("layout")&&d.layout===!1?d.layout=!1:d.layout=d.layout||this.controller.layout(),e=this,this._renderBody(d,function(a,b){return e._renderLayout(b,d,c)});throw new Error("You must pass a callback to the render method")},c.prototype._renderBody=function(b,c){var d;return b.text?c(null,b.text):b.json?c(null,typeof b.json=="string"?b.json:JSON.stringify(b.json)):(b.inline||(d=Metro.View.lookup(b.template),d=a.read(d)),b.engine.render(d,b.locals,c))},c.prototype._renderLayout=function(b,c,d){var e;return c.layout?(e=Metro.View.lookup("layouts/"+c.layout),e=a.read(e),c.locals.yield=b,c.engine.render(e,c.locals,d)):d(null,b)},c.prototype.context=function(a){var b,c,d;b=this.controller,d={};for(c in b)c!=="constructor"&&(d[c]=b[c]);return d=require("underscore").extend(d,this.locals||{},a.locals),Metro.View.prettyPrint&&(d.pretty=!0),d},c}(),Metro.View.include(Metro.View.Lookup),Metro.View.include(Metro.View.Rendering)})).call(this)